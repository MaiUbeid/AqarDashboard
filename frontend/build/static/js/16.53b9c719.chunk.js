(this["webpackJsonpaqarz-dashboard"]=this["webpackJsonpaqarz-dashboard"]||[]).push([[16],{1374:function(e,t,a){"use strict";a.r(t);var n=a(580),r=a.n(n),c=a(11),i=a(581),s=a(14),o=a(16),l=a(18),m=a(19),u=a(0),d=a.n(u),p=a(119),f=a(34),h=a(597),b=a.n(h),g=a(553),v=a(548),_=a(607),E=a.n(_),y=a(657),N=a(604),C=a(685),S=a(606),w=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={pageTitle:"",exportAllLoading:!1,page:1,pagesCount:0,loading:!1,list:[],data:"",states:[{value:"\u0627\u0644\u0631\u064a\u0627\u0636",id:1}],cities:[],neighborhood:[],typeList:[],areaList:[],priceList:[],offer_status:"",page_number:10,search:"",status:"",time:"",state_id:"",estate_type_id:"",area_estate_id:"",dir_estate_id:"",estate_price_id:"",city_id:"",neighborhood_id:"",form_date:"",to_date:"",uuid:"",statusList:[{key:"have_offers",value:"\u0637\u0644\u0628\u0627\u062a \u0627\u0633\u062a\u0642\u0628\u0644\u062a \u0639\u0631\u0648\u0636"},{key:"have_active_offers",value:"\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0639\u0627\u064a\u0646\u0629"},{key:"dont_have_active_offers",value:"\u0637\u0644\u0628\u0627\u062a \u0628\u062f\u0648\u0646 \u0639\u0631\u0648\u0636"},{key:"complete",value:"\u0637\u0644\u0628\u0627\u062a \u0645\u0646\u0641\u0630\u0629"},{key:"rejected_customer",value:"\u0637\u0644\u0628\u0627\u062a \u0645\u0631\u0641\u0648\u0636\u0629"}]},e.updatePageData=function(){Object(N.f)().then((function(t){e.setState({states:t.data.data})})),Object(N.a)().then((function(t){e.setState({areaList:t.data.data})})),Object(N.c)().then((function(t){e.setState({typeList:t.data.data})})),Object(N.b)().then((function(t){e.setState({priceList:t.data.data})})),e.getItemsList(e.state.page_number,e.state.page)},e.getItemsList=function(){var t=Object(i.a)(r.a.mark((function t(a,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0}),Object(y.b)(n,e.state.state_id,e.state.offer_status,e.state.time,e.state.estate_type_id,e.state.area_estate_id,e.state.dir_estate_id,e.state.estate_price_id,e.state.city_id,e.state.neighborhood_id,e.state.form_date,e.state.to_date,a,e.state.uuid).then((function(t){var a=Object(c.a)(t.data.data.data);e.setState({list:Object(c.a)(a),page:t.data.data.current_page,pagesCount:t.data.data.total,loading:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onStatesChange=function(t){""!==t?Object(N.d)(t).then((function(t){return e.setState({cities:t.data.data})})):e.setState({neighborhood_id:[],cities:[]})},e.onCitiesChange=function(t){t[0]&&t[0].serial_city?Object(N.e)(t[0].serial_city).then((function(a){e.setState({neighborhood:a.data.data,city_id:t[0].serial_city})})):e.setState({neighborhood_id:[],cities:[]})},e.onNeighborhoodChange=function(t){var a=[];t.forEach((function(e){a.push(e.neighborhood_serial)})),e.setState({neighborhood_id:a})},e.handlePageClick=function(t){var a=t.selected+1;e.setState({page:a}),setTimeout((function(){e.getItemsList(e.state.page_number,a)}),200)},e.getBadgeColor=function(e){switch(e){case"\u062c\u062f\u064a\u062f":return"primary";case"\u0645\u0633\u062a\u0639\u0645\u0644":return"success";default:return"primary"}},e.handlePageSizeChange=function(){var t=Object(i.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({page:1,page_number:a.value}),e.getItemsList(a.value,1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSearch=function(){e.getItemsList(e.state.page_number,1)},e.exportAllData=Object(i.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({exportAllLoading:!0}),Object(y.b)(1,e.state.state_id,e.state.offer_status,e.state.time,e.state.estate_type_id,e.state.area_estate_id,e.state.dir_estate_id,e.state.estate_price_id,e.state.city_id,e.state.neighborhood_id,e.state.form_date,e.state.to_date,e.state.pagesCount,e.state.uuid).then((function(t){var a=Object(c.a)(t.data.data.data),n=[];a.forEach((function(e){n.push({uuid:e.uuid,estate_type_name_web:e.estate_type_name_web,city_name:e.city_name,date:Object(f.d)(e.created_at),status_name:e.status_name,neighborhood_name:e.neighborhood_name,estate_price_range:e.estate_price_range,area_estate_range:e.area_estate_range})})),Object(f.b)(n,"Requests_".concat(e.state.offer_status,"_")),e.setState({exportAllLoading:!1})}));case 2:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.updateContentByStatus()}},{key:"updateContentByStatus",value:function(){var e=this,t=window.location.search,a=new URLSearchParams(t).get("status"),n=this.state.statusList.filter((function(e){return e.key===a}));n[0]?this.setState({pageTitle:n[0].value}):this.setState({pageTitle:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"}),""!==a?(this.setState({offer_status:a}),setTimeout((function(){e.updatePageData()}),100)):setTimeout((function(){e.updatePageData()}),100)}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"componentDidUpdate",value:function(e){this.props.location.search!==e.location.search&&this.updateContentByStatus()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.offer_status,t.search,t.page_number),n=(t.page,t.list),r=void 0===n?[]:n,c=t.form_date,i=t.to_date,s=t.pagesCount,o=t.loading,l=t.states,m=t.cities,u=t.neighborhood,h=t.typeList,_=t.areaList,y=t.priceList,N=t.exportAllLoading,w=(t.statusList,t.pageTitle);return d.a.createElement("div",null,d.a.createElement(p.a,{routeSegments:[{name:"\u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629",path:"/"},{name:w}]}),d.a.createElement("section",{className:"contact-list"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-md-12 mb-4"},d.a.createElement("div",{className:"card text-left"},d.a.createElement("div",{className:"row px-4 mt-3"},d.a.createElement("div",{className:"col-sm-12 col-md-12 mb-2"},d.a.createElement("div",{className:"align-items-center row"},d.a.createElement("div",{className:"mr-1 mb-3 col-md-4"},d.a.createElement(g.a,{placement:"top",overlay:d.a.createElement(v.a,{id:"tooltip-top"},"\u0628\u062d\u062b \u0628\u0627\u0644 UUID ")},d.a.createElement("input",{type:"search",className:"form-control","aria-controls":"ul-contact-list",placeholder:"\u0623\u0643\u062a\u0628 \u0631\u0642\u0645 \u0627\u0644 UUID \u0644\u0644\u0628\u062d\u062b ",onKeyUp:function(t){e.setState({uuid:t.target.value})}})))),d.a.createElement("div",{className:"align-items-center row"},d.a.createElement("div",{className:"mr-1 mb-3 col-md-2"},d.a.createElement(g.a,{placement:"top",overlay:d.a.createElement(v.a,{id:"tooltip-top"},"\u0628\u062d\u062b \u0628\u0646\u0648\u0639 \u0627\u0644\u0639\u0642\u0627\u0631 \u0623\u0648 \u0627\u0644\u062a\u0627\u0631\u064a\u062e ")},d.a.createElement("input",{type:"search",className:"form-control","aria-controls":"ul-contact-list",placeholder:"\u0628\u062d\u062b",onKeyUp:function(t){e.setState({search:t.target.value})}}))),d.a.createElement("div",{className:"mr-1 col-md-2 mb-3"},d.a.createElement("select",{className:"form-control",onChange:function(t){e.setState({estate_type_id:t.target.value})}},d.a.createElement("option",{value:""},"\u0622\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0639\u0642\u0627\u0631"),h.map((function(e,t){return d.a.createElement("option",{key:t,value:e.id},e.name_ar)})))),d.a.createElement("div",{className:"mr-1 col-md-2 mb-3"},d.a.createElement("select",{className:"form-control",onChange:function(t){e.setState({area_estate_id:t.target.value})}},d.a.createElement("option",{value:""},"\u0622\u062e\u062a\u0631 \u0627\u0644\u0645\u0633\u0627\u062d\u0629"),_.map((function(e,t){return d.a.createElement("option",{key:t,value:e.id},e.area_range)})))),d.a.createElement("div",{className:"col-md-2 mb-3"},d.a.createElement("div",{className:"input-group"},d.a.createElement("span",{className:"w-50"},d.a.createElement(E.a,{dateFormat:"yyyy-MM-dd",autoComplete:"off",id:"startDate",className:"rounded-0 form-control d-inline",placeholderText:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e",maxDate:new Date,onChange:function(t){return e.setState({form_date:Object(f.c)(t)})},value:c})),d.a.createElement("span",{className:"w-50"},d.a.createElement(E.a,{dateFormat:"yyyy-MM-dd",autoComplete:"off",id:"endtDate",className:"rounded-0 form-control d-inline",placeholderText:"\u062d\u062a\u0649 \u062a\u0627\u0631\u064a\u062e",maxDate:new Date,onChange:function(t){return e.setState({to_date:Object(f.c)(t)})},value:i}))))),d.a.createElement("div",{className:"align-items-center row"},d.a.createElement("div",{className:"mr-1 col-md-2 mb-3"},d.a.createElement("select",{className:"form-control",onChange:function(t){e.setState({estate_price_id:t.target.value})}},d.a.createElement("option",{value:""},"\u0627\u0644\u0633\u0639\u0631"),y.map((function(e,t){return d.a.createElement("option",{key:t,value:e.id},e.estate_price_range)})))),d.a.createElement("div",{className:"mr-1 col-md-2 mb-3"},d.a.createElement("select",{className:"form-control",onChange:function(t){e.setState({state_id:t.target.value}),e.onStatesChange(t.target.value)}},d.a.createElement("option",{value:""},"\u0622\u062e\u062a\u0631 \u0627\u0644\u0645\u0646\u0637\u0642\u0629"),l.map((function(e,t){return d.a.createElement("option",{key:t,value:e.id},e.value)})))),d.a.createElement("div",{className:"mr-1 col-md-2 mb-3"},d.a.createElement(C.a,{id:"basic-typeahead-single",labelKey:"name",onChange:function(t){e.onCitiesChange(t)},options:m,placeholder:"\u0622\u062e\u062a\u0631 \u0627\u0644\u0645\u062f\u064a\u0646\u0629",disabled:m.length<1})),d.a.createElement("div",{className:"mr-1 col-md-2 mb-3"},d.a.createElement(C.a,{id:"basic-typeahead-single",labelKey:"name_ar",onChange:function(t){e.onNeighborhoodChange(t)},options:u,placeholder:"\u0622\u062e\u062a\u0631 \u0627\u0644\u0627\u062d\u064a\u0627\u0621",disabled:u.length<1,multiple:!0})),d.a.createElement("button",{type:"button",className:"btn btn-primary btn-md mb-3",onClick:this.onSearch},"\u0639\u0631\u0636 \u0627\u0644\u0646\u062a\u0627\u0626\u062c"),d.a.createElement(g.a,{placement:"top",overlay:d.a.createElement(v.a,{id:"tooltip-top"},"\u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0646\u062a\u0627\u0626\u062c ")},d.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-md mb-3 ml-2",onClick:function(){return Object(f.b)([],"Requests_")}},d.a.createElement("i",{className:"i-File-Excel"}))),d.a.createElement(S.a,{className:"btn btn-primary btn-md mb-3 ml-2",loading:N,animation:"border",spinnerSize:"sm"},!N&&d.a.createElement("span",{onClick:function(){return e.exportAllData()}},d.a.createElement("i",{className:"i-File-Excel m-1"}),"\u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0643\u0644"),N&&d.a.createElement("span",null,"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u0635\u062f\u064a\u0631.."))))),o&&d.a.createElement(p.c,null),d.a.createElement("div",{className:"card-body pt-1 ".concat(o?"invisible":"visible")},s>0?d.a.createElement("div",null,d.a.createElement("div",{className:"table-responsive"},d.a.createElement("table",{id:"excel-table",className:"display table w-100"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{width:"300"},"UUID"),d.a.createElement("th",null,"\u0646\u0648\u0639 \u0627\u0644\u0639\u0642\u0627\u0631"),d.a.createElement("th",null,"\u0627\u0644\u0645\u062f\u064a\u0646\u0629"),d.a.createElement("th",{width:"100"},"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0631\u0633\u0627\u0644"),d.a.createElement("th",null,"\u0627\u0644\u062d\u0627\u0644\u0629"),d.a.createElement("th",null,"\u0627\u0644\u062d\u064a"),d.a.createElement("th",null,"\u0627\u0644\u0633\u0639\u0631"),d.a.createElement("th",null,"\u0627\u0644\u0645\u0633\u0627\u062d\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"),d.a.createElement("th",null,"\u0627\u0644\u0639\u0645\u0644\u064a\u0627\u062a"))),d.a.createElement("tbody",null,r.slice(0,a).map((function(t,a){return d.a.createElement("tr",{key:a},d.a.createElement("td",{valign:"middle"},d.a.createElement("div",{className:"ul-widget-app__profile-pic"},t.uuid)),d.a.createElement("td",null,d.a.createElement("img",{className:"profile-picture avatar-sm mb-2 p-2 img-fluid mr-2",src:t.estate_type_icon,alt:""}),t.estate_type_name_web),d.a.createElement("td",null,t.city_name),d.a.createElement("td",null,Object(f.d)(t.created_at)),d.a.createElement("td",{valign:"middle"},d.a.createElement("div",{className:"badge badge-".concat(e.getBadgeColor(t.estate_status)," p-2 text-capitalize")},t.estate_status)),d.a.createElement("td",null,t.neighborhood_name),d.a.createElement("td",null,t.estate_price_range),d.a.createElement("td",null,t.area_estate_range),d.a.createElement("td",null,d.a.createElement("div",{className:"d-flex"},d.a.createElement(g.a,{placement:"top",overlay:d.a.createElement(v.a,{id:"tooltip-top"},"\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644")},d.a.createElement("button",{onClick:function(){return e.props.history.push("/request/".concat(t.id))},className:"btn btn-light btn-md m-1 mt-3"},d.a.createElement("i",{className:"i-Eye"}))))))}))))),d.a.createElement("div",{className:"d-flex justify-content-end mr-lg-4"},d.a.createElement("div",{className:"col-sm-12 col-md-6 mb-2"},d.a.createElement(b.a,{previousLabel:"\u0627\u0644\u0633\u0627\u0628\u0642",nextLabel:"\u0627\u0644\u062a\u0627\u0644\u064a",breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(s/a),marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:this.handlePageClick,containerClassName:"pagination pagination-lg",subContainerClassName:"pages pagination",activeClassName:"active"})),d.a.createElement("div",{className:"col-sm-12 col-md-6 mb-2"},d.a.createElement("div",{className:"d-flex align-items-center float-right"},d.a.createElement("span",{className:"mr-1"},"\u0639\u0646\u0627\u0635\u0631"),d.a.createElement("div",{className:"mr-1"},d.a.createElement("select",{value:a,className:"form-control",onChange:function(t){var a=t.target.value;e.handlePageSizeChange({value:a})}},d.a.createElement("option",{value:10},"10"),d.a.createElement("option",{value:25},"25"),d.a.createElement("option",{value:50},"50"),d.a.createElement("option",{value:100},"100"),d.a.createElement("option",{value:s},"\u0627\u0644\u0643\u0644"))),d.a.createElement("span",null,"\u0639\u0631\u0636"))))):d.a.createElement("div",{className:"alert alert-info"},"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a")))))))}}]),a}(u.Component);t.default=w},579:function(e,t,a){"use strict";var n=a(3),r=a(8),c=a(0),i=a.n(c);var s=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];e.apply(this,n),t.apply(this,n)}}),null)};function o(e){return!e||"#"===e.trim()}var l=i.a.forwardRef((function(e,t){var a=e.as,c=void 0===a?"a":a,l=e.disabled,m=e.onKeyDown,u=Object(r.a)(e,["as","disabled","onKeyDown"]),d=function(e){var t=u.href,a=u.onClick;(l||o(t))&&e.preventDefault(),l?e.stopPropagation():a&&a(e)};return o(u.href)&&(u.role=u.role||"button",u.href=u.href||"#"),l&&(u.tabIndex=-1,u["aria-disabled"]=!0),i.a.createElement(c,Object(n.a)({ref:t},u,{onClick:d,onKeyDown:s((function(e){" "===e.key&&(e.preventDefault(),d(e))}),m)}))}));l.displayName="SafeAnchor";t.a=l},604:function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return l}));var n=a(120),r=function(){return n.a.get("state")},c=function(e){return n.a.get("cities?state_id=".concat(e))},i=function(e){return n.a.get("neighborhood/".concat(e))},s=function(){return n.a.get("estate/price")},o=function(){return n.a.get("estate/area")},l=function(){return n.a.get("estate/type")}},606:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(632),i=a(687);t.a=function(e){var t=e.variant,a=void 0===t?"primary":t,n=e.loading,s=void 0!==n&&n,o=e.animation,l=e.spinnerSize,m=e.buttonSize,u=e.children,d=e.className;return r.a.createElement(c.a,{variant:a,disabled:s,className:"d-flex flex-row align-items-center ".concat(d),size:m},s&&r.a.createElement(i.a,{className:"mr-2",animation:o,size:l}),u)}},632:function(e,t,a){"use strict";var n=a(3),r=a(8),c=a(17),i=a.n(c),s=a(0),o=a.n(s),l=a(33),m=a(579),u=o.a.forwardRef((function(e,t){var a=e.bsPrefix,c=e.variant,s=e.size,u=e.active,d=e.className,p=e.block,f=e.type,h=e.as,b=Object(r.a)(e,["bsPrefix","variant","size","active","className","block","type","as"]),g=Object(l.a)(a,"btn"),v=i()(d,g,u&&"active",c&&g+"-"+c,p&&g+"-block",s&&g+"-"+s);if(b.href)return o.a.createElement(m.a,Object(n.a)({},b,{as:h,ref:t,className:i()(v,b.disabled&&"disabled")}));t&&(b.ref=t),f?b.type=f:h||(b.type="button");var _=h||"button";return o.a.createElement(_,Object(n.a)({},b,{className:v}))}));u.displayName="Button",u.defaultProps={variant:"primary",active:!1,disabled:!1},t.a=u},657:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return s}));var n=a(120),r=function(e,t,a,r,c,i,s,o,l,m,u,d,p,f){return n.a.get("fund/requests?page=".concat(e,"&state_id=").concat(t,"&offer_status=").concat(a,"&time=").concat(r,"&estate_type_id=").concat(c,"&area_estate_id=").concat(i,"&dir_estate_id=").concat(s,"&estate_price_id=").concat(o,"&city_id=").concat(l,"&neighborhood_id=").concat(m,"&form_date=").concat(u,"&to_date=").concat(d,"&page_number=").concat(p,"&uuid=").concat(f))},c=function(e){return n.a.get("fund/request/".concat(e,"/show"))},i=function(e,t,a,r){return n.a.get("fund/available/estate/offers/".concat(e,"?page=").concat(t,"&page_number=").concat(a,"&search_type=").concat(r))},s=function(e){return n.a.post("fund/send/offer/fund/dash",e)}},687:function(e,t,a){"use strict";var n=a(3),r=a(8),c=a(17),i=a.n(c),s=a(0),o=a.n(s),l=a(33),m=o.a.forwardRef((function(e,t){var a=e.bsPrefix,c=e.variant,s=e.animation,m=e.size,u=e.children,d=e.as,p=void 0===d?"div":d,f=e.className,h=Object(r.a)(e,["bsPrefix","variant","animation","size","children","as","className"]),b=(a=Object(l.a)(a,"spinner"))+"-"+s;return o.a.createElement(p,Object(n.a)({ref:t},h,{className:i()(f,b,m&&b+"-"+m,c&&"text-"+c)}),u)}));m.displayName="Spinner",t.a=m}}]);
//# sourceMappingURL=16.53b9c719.chunk.js.map